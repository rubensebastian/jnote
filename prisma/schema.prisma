generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Range {
  HIGH
  LOW
}

enum Required {
  REQUIRED
  PREFERRED
}

model applicant {
  id            Int          @id @default(autoincrement())
  username      String       @unique @db.VarChar(50)
  email         String       @unique @db.VarChar(100)
  password_hash String
  created_at    DateTime?    @default(now()) @db.Timestamp(6)
  verified      Boolean      @default(false)
  verification_token String?  @unique
  education     education[]
  experience    experience[]
  jobs          job[]
}

model education {
  id           BigInt    @id @default(autoincrement())
  applicant_id Int
  field        String    @db.VarChar(255)
  start_date   DateTime  @db.Date
  end_date     DateTime? @db.Date
  institution  String    @db.VarChar(255)
  level        String    @db.VarChar(20)
  applicant    applicant @relation(fields: [applicant_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model experience {
  id             BigInt           @id @default(autoincrement())
  applicant_id   Int
  organization   String           @db.VarChar(255)
  title          String           @db.VarChar(255)
  start_date     DateTime         @db.Date
  end_date       DateTime?        @db.Date
  applicant      applicant        @relation(fields: [applicant_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  responsibility responsibility[]
}

model responsibility {
  id            BigInt     @id @default(autoincrement())
  experience_id BigInt
  description   String
  experience    experience @relation(fields: [experience_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model job {
  id                BigInt            @id @default(autoincrement())
  applicant_id      Int
  organization      String            @db.VarChar(255)
  title             String            @db.VarChar(255)
  applied_at        DateTime?         @db.Timestamp(6)
  applicant         applicant         @relation(fields: [applicant_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  jobEducation      job_education[]
  jobResponsibility job_responsibility[]
  jobDescription    job_description[]
  salary            salary[]
}

model job_education {
  id          BigInt @id @default(autoincrement())
  job_id      BigInt
  field       String @db.VarChar(255)
  required    Required
  job         job    @relation(fields: [job_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model job_responsibility {
  id            BigInt @id @default(autoincrement())
  job_id        BigInt
  description   String
  required      Required
  job           job    @relation(fields: [job_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model job_description {
  id          BigInt @id @default(autoincrement())
  job_id      BigInt
  description String
  order       Int
  job         job    @relation(fields: [job_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model salary {
  id     BigInt @id @default(autoincrement())
  job_id BigInt
  range  Range
  amount Int
  job    job    @relation(fields: [job_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}